{"version":3,"sources":["app.js","animations.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrNA","file":"concat.js","sourcesContent":["var BorrowApp = angular.module('BorrowApp', ['ngResource', 'ngAnimate', 'ui.router', 'ui.bootstrap']);\n\n// UI.ROUTER //\nBorrowApp.config(['$stateProvider', '$urlRouterProvider', \n  function($stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise('/');\n\n    $stateProvider\n    .state('main', {\n      url: '/',\n      templateUrl: 'app/views/main.html',\n      controller: 'MainCtrl'\n    })\n    .state('stuff', {\n      url: '/',\n      templateUrl: 'app/views/nav.html',\n      controller: 'BorrowCtrl'\n    })\n    .state('stuff.search', {\n      url: 'stuff/search',\n      templateUrl: 'app/views/borrow.html'\n    })\n    .state('stuff.lend', {\n      url: 'stuff/lend',\n      templateUrl: 'app/views/lend.html',\n    })\n    .state('stuff.borrowed', {\n      url: 'stuff/borrowed',\n      templateUrl: 'app/views/borrowed.html'\n    })\n\n  }]); // END config\n\n/////////////////////////\n//     CONTROLLERS    //\n///////////////////////\n\n// MAIN CTRL //\nBorrowApp.controller('MainCtrl', ['$scope', 'Users', 'selectUser', '$state', function($scope, Users, selectUser, $state) {\n  $scope.borrow = \"BegBorrowNeverSteal\";\n  // fad in and out pills\n  $scope.bool = true;\n  // include User from resource factory in array\n  // query express Users for users\n  Users.query(function success(data) {\n    $scope.allUsers = data;\n  }, function error(error) {\n    console.log(\"Error allUsers\", error);\n  });\n\n  // function for sending user selection to borrow page\n  $scope.select = function(id){\n    // console.log(\"state\", $state);\n    selectUser.setId(id);\n    $state.go('stuff.search');\n  };\n}]); // END MainCtrl\n\n// BORROW CTRL //\nBorrowApp.controller('BorrowCtrl', \n  ['$scope', '$http', '$state', '$uibModal', '$log', 'selectUser', \n  function($scope, $http, $state, $uibModal, $log, selectUser) {\n  \n  $scope.navTitle = \"Stuff to Borrow\";\n\n  // NAVIGATE\n  $scope.home = function() {\n    $state.go('main');\n  };\n\n  $scope.titleChange = function(state){\n    if (state === 'search') {\n      $scope.navTitle = \"Stuff to Borrow\"; \n    } else if (state === 'borrowed') {\n      $scope.navTitle = \"Stuff I Borrowed\"; \n    } else if (state === 'lend') {\n      $scope.navTitle = \"Stuff I Lend\"; \n    };   \n  };\n\n  $scope.prevState = function(){\n      // console.log($state);\n    if ($state.is('stuff.search')) {\n      $state.go('stuff.borrowed');\n      var state = 'borrowed';\n    } else if ($state.is('stuff.borrowed')) {\n      $state.go('stuff.lend')\n      var state = 'lend';\n    } else if ($state.is('stuff.lend')) {\n      $state.go('stuff.search');\n      var state = 'search';\n    };\n    $scope.titleChange();\n  };\n  $scope.nextState = function(){\n      // console.log($state, \"HERE\");\n    if ($state.is('stuff.search')) {\n      $state.go('stuff.lend');\n      var state = 'lend';\n    } else if ($state.is('stuff.lend')) {\n      $state.go('stuff.borrowed')\n      var state = 'borrowed';\n    } else if ($state.is('stuff.borrowed')) {\n      $state.go('stuff.search');\n      var state = 'search';\n    };\n    $scope.titleChange(state);\n  };\n\n  $scope.checkInOrOut = function(id, borrowed) {\n    console.log(\"id, borrowed\", id, borrowed);\n    \n    $http.put('/api/edit/stuff/' + id)\n  }\n  // NEW ITEM MODAL\n  $scope.animationsEnabled = true;\n\n  $scope.open = function(size) {\n    var modalInstance = $uibModal.open({\n      animation: $scope.animationsEnabled,\n      templateUrl: 'newItemModal.html',\n      controller: 'ModalInstanceCtrl',\n      size: size,\n      resolve: {}\n    });\n  };\n\n  // GET USER SELECTED\n  var id = selectUser.getId();\n  // $http call to backend route that queries db\n  $http.get('/api/borrow-stuff/' + id).success(function(data, status) {\n      console.log('Data1', data);\n      $scope.items = data;\n    });\n  // Items.query(function success(data) {\n  //   $scope.items = data;\n  // });\n  console.log(\"id\", id);\n  // GET USER LEND\n  $http.get('/api/lend-stuff/' + id).success(function(data, status) {\n    // console.log(\"myItems\", data);\n    $scope.myItems = data;\n  });\n\n  $http.get('/api/borrowed-stuff/' + id).success(function(data, status) {\n    $scope.myBorrowedItems = data;\n  })\n}]); // END BorrowCtrl\n\n\n// MODAL INSTANCE CTRL\n\nBorrowApp.controller('ModalInstanceCtrl', ['$scope', '$http', '$uibModalInstance', 'selectUser', \n  function($scope, $http, $uibModalInstance, selectUser) {\n  var id = selectUser.getId();\n\n  $scope.newItem = {\n    user_id: id,\n    name: '',\n    category: '',\n    description: '',\n    imageUrl: '',\n    active: true,\n    borrowed: false,\n    dateBorrowed: null,\n    borrowerID: null\n  };\n  $scope.createItem = function(newItem){\n    // Send form with newItem info to backend\n    $http.post('/api/new-stuff/', $scope.newItem)\n    .then(function success(res) {\n      console.log(\"Post Succes\", res);\n    }, function error(err){\n      alert(\"Error: Item was not created\");\n      console.log(\"Post Error\", err);\n    });    \n  }\n\n  $scope.ok = function(){\n    $uibModalInstance.close();\n  };\n\n  $scope.cancel = function() {\n    $uibModalInstance.dismiss('cancel');\n  };\n}]); // END modal instance Ctrl\n\n\n/////////////////////////////////\n//     Factories & Services   //\n///////////////////////////////\n\n// FACTORIES\n// Gets list of all users and sends to MAIN CTRL\nBorrowApp.factory('Users', ['$resource', function($resource) {\n  return $resource('/api/users');\n}]);\n\n// // Refactored - now used $http to call exress instead\n// BorrowApp.factory('Items', ['$resource', function($resource) {\n//   return $resource('/api/borrow-stuff');\n// }]);\n\n// SERVICES\n// Sets and gets Id for user selected on main.html\nBorrowApp.service('selectUser', [function() {\n  this.setId = function(id) {\n    this.id = id;\n  }\n  this.getId = function(){\n    return this.id;\n  }\n}]);",""],"sourceRoot":"/source/"}